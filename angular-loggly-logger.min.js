!function(e){"use strict";e.module("logglyLogger.logger",[]).provider("LogglyLogger",function(){var n,r=this,t=["DEBUG","INFO","WARN","ERROR"],i=!0,o={},s=!1,l=!1,g=!1,u=null,a=!1,f=!0,d=!0,c={},v=!1,h=0,p=null,D=function(){return p};this.endpoint=function(n){return e.isDefined(n)?(p=n,r):p},this.setExtra=function(e){return o=e,r},this.fields=function(n){return e.isDefined(n)?(e.extend(o,n),r):o},this.labels=function(n){return e.isObject(n)?(c=n,r):c},this.useHttps=function(n){return e.isDefined(n)?(i=!!n,r):i},this.includeUrl=function(n){return e.isDefined(n)?(s=!!n,r):s},this.includeTimestamp=function(n){return e.isDefined(n)?(l=!!n,r):l},this.includeUserAgent=function(n){return e.isDefined(n)?(g=!!n,r):g},this.inputTag=function(n){return e.isDefined(n)?(u=n,r):u},this.sendConsoleErrors=function(n){return e.isDefined(n)?(a=!!n,r):a},this.level=function(n){if(e.isDefined(n)){var i=t.indexOf(n.toUpperCase());if(i<0)throw"Invalid logging level specified: "+n;return h=i,r}return t[h]},this.isLevelEnabled=function(e){return t.indexOf(e.toUpperCase())>=h},this.loggingEnabled=function(n){return e.isDefined(n)?(d=!!n,r):d},this.logToConsole=function(n){return e.isDefined(n)?(f=!!n,r):f},this.deleteHeaders=function(n){return e.isDefined(n)?(v=!!n,r):v},this.ignoreMessageRegex=function(t){return e.isDefined(t)?(n=t,r):n},this.$get=["$injector",function(t){var i=null,u=function(r){if(p&&d){var u=t.get("$window"),a=t.get("$location"),f=t.get("$http");i=new Date;var h=e.extend({},o,r);if(s&&(h.url=a.absUrl()),l&&(h.timestamp=i.toISOString()),g&&(h.userAgent=u.navigator.userAgent),n)try{var E=JSON.stringify(h);if(n.test(E))return}catch(e){console.log(e)}var b={};if(v){var w=Object.keys(f.defaults.headers.common).concat(Object.keys(f.defaults.headers.post));w=w.filter(function(e){return"Accept"!==e&&"Content-Type"!==e});for(var O=0;O<w.length;O++){var R=w[O];b.headers[R]=void 0}}for(var m in c)m in h&&(h[c[m]]=h[m],delete h[m]);f.post(D(),h,b).catch(console.error)}},E=function(){};return{lastLog:function(){return i},sendConsoleErrors:function(){return a},level:function(){return h},loggingEnabled:r.loggingEnabled,isLevelEnabled:r.isLevelEnabled,inputTag:r.inputTag,attach:E,sendMessage:u,logToConsole:f,endpoint:p,fields:function(n){return e.isDefined(n)&&r.fields(n),r.fields()}}}]}),e.module("logglyLogger",["logglyLogger.logger"]).config(["$provide",function(n){n.decorator("$log",["$delegate","$injector",function(n,r){var t=r.get("LogglyLogger");if(!0===t.sendConsoleErrors()){var i=window.onerror;window.onerror=function(e,n,r,o,s){t.sendMessage({level:"ERROR",message:e,line:r,col:o,stack:s&&s.stack||""}),i&&"function"==typeof i&&i.apply(window,arguments)}}var o=function(n,r,i){var o=function(){var o=Array.prototype.slice.call(arguments);if(t.logToConsole&&n.apply(null,o),t.loggingEnabled()&&t.isLevelEnabled(r)){var s=(1===o.length?o[0]:o)||{},l={level:r};if(e.isDefined(s.stack)||e.isDefined(s[0])&&e.isDefined(s[0].stack)){if(!0!==t.sendConsoleErrors())return;l.message=s.message?s.message:s[0]&&s[0].message?s[0].message:null,l.stack=s.stack||s[0].stack}else e.isObject(s)?l=e.extend({},s,l):l.message=s;i&&(l.logger=s),t.sendMessage(l)}};return o.logs=[],o},s=function(e){return{log:e.log,info:e.info,warn:e.warn,error:e.error}}(n),l=function(e){return{log:o(s.log,"INFO",e),debug:o(s.debug,"DEBUG",e),info:o(s.info,"INFO",e),warn:o(s.warn,"WARN",e),error:o(s.error,"ERROR",e)}};return n.log=o(n.log,"INFO"),n.debug=o(n.debug,"DEBUG"),n.info=o(n.info,"INFO"),n.warn=o(n.warn,"WARN"),n.error=o(n.error,"ERROR"),n.getLogger=l,n}])}])}(window.angular);
//# sourceMappingURL=angular-loggly-logger.min.js.map